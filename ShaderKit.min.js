// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.ShaderKit)
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill=function(a,b,e,c){if(b){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var h=a[c];h in e||(e[h]={});e=e[h]}a=a[a.length-1];c=e[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,e){for(var c=1;c<arguments.length;c++){var b=arguments[c];if(b)for(var d in b)$jscomp.owns(b,d)&&(a[d]=b[d])}return a}},"es6-impl","es3");
(function(a){function b(a,b){a.addEventListener("click",b);a.addEventListener("touchstart",b)}function e(a,b,d){(new ResizeObserver(function(){if(h.full&&h.loaded){var m=window.getComputedStyle(a.parentNode,null);b.setSize(m.width,m.height);b.on("change",function(){c.setAttribute("state","changed")})}})).observe(a.parentNode.parentNode);a.addEventListener("keydown",function(a){if(a.ctrlKey&&"s"===a.key)return a.preventDefault(),h.save(),!1;if("Tab"===a.key){a.preventDefault();a=this.selectionStart;
var b=this.selectionEnd;this.value=this.value.substring(0,a)+"\t"+this.value.substring(b);this.selectionStart=this.selectionEnd=a+1}c.setAttribute("state","changed")})}var c,h,d={};h={vertexShader:"",fragmentShader:"",material:null,elements:d,js:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js","https://mevedia.com/share/glsl.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/search/search.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/search/searchcursor.min.js",
"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/selection/active-line.min.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css"],mode:"glsl",used:!1,loaded:!1,full:false,editor:{config:{},vertex:null,fragment:null},ready:function(){},use:function(a){function m(a){var b={lineNumbers:!0,indentWithTabs:!0,mode:k.mode,value:a.value,"Ctrl-S":function(a){k.save()}};Object.assign(b,k.editor.config);return CodeMirror.fromTextArea(a,b)}function h(){k.loaded=!0;
a&&(k.editor.vertex=m(d.vertex),k.editor.fragment=m(d.fragment));e(d.vertex,k.editor.vertex);e(d.fragment,k.editor.fragment);k.ready(k)}a=void 0===a?this.full:a;var n=this;this.full=a;this.used=!0;var l=document.createElement("div"),k=this,g="";if(a)for(var f=$jscomp.makeIterator(this.css),p=f.next();!p.done;p=f.next())g+='<link rel="stylesheet" href="'+p.value+'">';l.innerHTML='<div class="sk" style="display:none;">\n\t\t\t\t'+g+'\n\t\t\t\t<style>\n\t\t\t\t.CodeMirror { position: absolute;}\n\t\t\t\t.sk {\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\tz-index: 999;\n\t\t\t\t\tfont-family: system-ui;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tright: 0;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\twidth: 30vw;\n\t\t\t\t\theight: 100vh;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t\tbackground-color: #272727cf;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tpadding: 0.5em;\n\t\t\t\t\tbox-shadow: 0 0 0 4px grey;\n\t\t\t\t}\n\t\t\t\t.sk[state="changed"] #update {\n\t\t\t\t\tbackground: orange;\n\t\t\t\t}\n\t\t\t\t.sk textarea {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\tmargin: 0.25em;\n\t\t\t\t\tcolor: black;\n\t\t\t\t\tfont-weight: normal;\n\t\t\t\t\tfont-size: initial;\n\t\t\t\t\tfont-family: Courier New;\n\t\t\t\t\tpadding: 0.25em;\n\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\tborder: none;\n\t\t\t\t}\n\t\t\t\t.sk-button {\n\t\t\t\t\tmargin: 0.5em;\n\t\t\t\t\tpadding: 0.5em 1em;\n\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\tbackground: gray;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tbox-shadow: none;\n\t\t\t\t\talign-self: baseline;\n\t\t\t\t}\n\t\t\t\t.sk button:hover { background: #6d6d6d; }\n\t\t\t\t.sk button:active { background: #575757; }\n\t\t\t\t.sk-label { padding: 4px;}\n\t\t\t\t.sk-box { position: relative; flex-grow: 1;}\n\t\t\t\t.sk-toolbar { display: flex; justify-content: end;padding: 1em 0; }\n\t\t\t\t.sk-x { display: flex;flex-direction: row; }\n\t\t\t\t.sk-y { display: flex;flex-direction: column; }\n\t\t\t\t.sk-grow { display: flex; flex-grow: 1 };\n\t\t\t\t</style>\n\t\t\t\t<div class="sk-y sk-grow"><div class="sk-label">Vertex <button id="copyVertex" class="sk-button">Copy</button></div><div class="sk-box"><textarea id="vertex" class="sk-grow" autocorrect="off" spellcheck="false" autocapitalize="off"></textarea></div></div>\n\t\t\t\t<div class="sk-y sk-grow"><div class="sk-label">Fragment <button id="copyFragment" class="sk-button">Copy</button></div><div class="sk-box"><textarea id="fragment" class="sk-grow" autocorrect="off" spellcheck="false" autocapitalize="off"></textarea></div></div>\n\t\t\t\t<div class="sk-toolbar">\n\t\t\t\t\t<div class="sk-x sk-label sk-grow"><div id="name"></div></div>\n\t\t\t\t\t<button id="revert" class="sk-button">Revert</button>\n\t\t\t\t\t<button id="update" class="sk-button">Update</button>\n\t\t\t\t\t<button id="cancel" class="sk-button">Cancel</button>\n\t\t\t\t</div>\n\t\t\t</div>';
c=l.childNodes[0];g=c.querySelectorAll("[id]");g=$jscomp.makeIterator(g);for(f=g.next();!f.done;f=g.next())f=f.value,d[f.id]=f;l.removeChild(c);document.body.appendChild(c);if(a)for(var r=this.js.length,q=0,l=$jscomp.makeIterator(this.js),g=l.next();!g.done;g=l.next())g=g.value,f=document.createElement("script"),f.onload=function(a){q++;q===r&&h()},f.async=!1,f.src=g,c.appendChild(f);else h();b(d.revert,function(a){return n.revert()});b(d.update,function(a){return n.save()});b(d.cancel,function(a){return n.close()});
b(d.copyVertex,function(a){return navigator.clipboard.writeText(n.getVertex())});b(d.copyFragment,function(a){return navigator.clipboard.writeText(n.getFragment())})},set:function(a){this.used||this.use();a||this.close();this.material=a;c.style.display="flex";var b=a.name||a.id||a.uuid;b===a.type&&(b=a.id||a.uuid);d.name.innerHTML="Material: "+b+(" (<b>"+a.type+"</b>)");d.vertex.value=a.vertexShader;d.fragment.value=a.fragmentShader;this.full&&this.loaded&&(this.editor.vertex.setValue(a.vertexShader),
this.editor.fragment.setValue(a.fragmentShader));c.setAttribute("state","")},edit:function(a,b){this.full=b=void 0===b?this.full:b;this.used||this.use();this.vertexShader=a.vertexShader;this.fragmentShader=a.fragmentShader;this.set(a)},revert:function(){this.save(this.fragmentShader,this.vertexShader);this.set(this.material)},getVertex:function(){return this.full&&this.loaded?this.editor.vertex.getValue():this.elements.vertex.value},getFragment:function(){return this.full&&this.loaded?this.editor.fragment.getValue():
this.elements.fragment.value},save:function(a,b){a=void 0===a?"":a;if(this.material){var d=this.material;d.vertexShader=(void 0===b?"":b)||this.getVertex();d.fragmentShader=a||this.getFragment();d.needsUpdate=!0;c.setAttribute("state","")}},close:function(){this.material=null;this.fragmentShader=this.vertexShader="";c.setAttribute("state","");c.style.display="none"}};a&&(a.sk=h)})(self||window);
